<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Vision Ultra</title>
    <link rel="stylesheet" href="sidepanel.css">
</head>
<body>
    <header class="glass">
        <div class="logo">AI VISION ULTRA</div>
        <div class="status-pills">
            <div class="status-pill online" title="Drive Connected">Drive</div>
            <div class="status-pill" title="Colab Disconnected">Colab</div>
            <div class="status-pill" id="copilot-status" title="Copilot Disconnected">Copilot</div>
        </div>
    </header>

    <main>
        <section>
            <h2>Integrations</h2>
            <div class="function-grid">
                <button class="btn-func glass btn-primary" id="btn-connect-copilot">
                    <span>‚ìÇÔ∏è</span> Connect Copilot
                </button>
                <button class="btn-func glass btn-secondary" id="btn-send-copilot">
                    <span>üöÄ</span> Send to Copilot
                </button>
            </div>
        </section>
        <section>
            <h2>AI Models</h2>
            <div class="model-grid">
                <div class="model-card glass active" id="model-gemini">
                    <span class="model-icon">üëÅÔ∏è</span>
                    <span>Gemini Vision</span>
                </div>
                <div class="model-card glass" id="model-deepseek">
                    <span class="model-icon">üíª</span>
                    <span>DeepSeek Coder</span>
                </div>
            </div>
        </section>

        <section>
            <h2>Functions</h2>
            <div class="function-grid">
                <button class="btn-func glass btn-primary" id="btn-screenshot">
                    <span>üì∏</span> Screenshot
                </button>
                <button class="btn-func glass btn-primary" id="btn-vision">
                    <span>‚ö°</span> AI Vision
                </button>
                <button class="btn-func glass btn-secondary" id="btn-search">
                    <span>üåê</span> Web Search
                </button>
                <div class="btn-func glass" style="justify-content: space-between; padding: 0 12px;">
                    <span style="font-size: 0.8rem;">ü§ñ Autonomous</span>
                    <label class="switch">
                        <input type="checkbox" id="toggle-autonomous">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </section>

        <section class="glass" style="padding: 16px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <h2>History</h2>
                <button class="btn-func glass btn-primary" id="btn-new-chat" style="padding: 4px 12px; font-size: 0.75rem;">+ New</button>
            </div>
            <div id="conversation-list" style="max-height: 150px; overflow-y: auto; display: flex; flex-direction: column; gap: 8px;">
                <!-- Conversations will be listed here -->
            </div>
            <button class="btn-func glass btn-secondary" id="btn-export-memory" style="margin-top: 12px; width: 100%;">
                <span>üì•</span> Export for Training
            </button>
        </section>

        <section class="glass" style="padding: 16px;">
            <h2>File Converter</h2>
            <div style="display: flex; flex-direction: column; gap: 10px;">
                <input type="file" id="converter-input" accept="image/png,image/jpeg,image/webp" style="display: none;">
                <button class="btn-func glass btn-secondary" onclick="document.getElementById('converter-input').click()">
                    <span>üìÅ</span> Select Image
                </button>
                <div style="display: flex; gap: 8px;">
                    <select id="target-format" class="chat-input" style="flex: 1; border-radius: 8px;">
                        <option value="png">PNG</option>
                        <option value="jpeg">JPG</option>
                        <option value="webp">WebP</option>
                    </select>
                    <button class="btn-func glass btn-primary" id="btn-convert" style="padding: 8px 16px;">Convert</button>
                </div>
                <div id="convert-preview" style="display: none; margin-top: 10px; text-align: center;">
                    <img id="converted-img" style="max-width: 100%; border-radius: 8px; border: 1px solid var(--glass-border);">
                    <a id="download-link" class="btn-func glass btn-secondary" style="margin-top: 8px; text-decoration: none; display: inline-flex;">Download</a>
                </div>
            </div>
        </section>

        <div class="resize-handle" id="chat-resize-handle"></div>
        <div class="chat-container glass" id="chat-container">
            <div class="chat-messages" id="chat-messages">
                <div class="message ai">Hello! How can I help you with AI Vision today?</div>
            </div>
            <div class="typing-indicator" id="typing-indicator" style="display: none;">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
            <div class="chat-input-area">
                <input type="text" class="chat-input" placeholder="Ask AI anything..." id="chat-input">
                <button class="btn-func glass" id="btn-send" style="padding: 8px 12px; border-radius: 50%;">‚û°Ô∏è</button>
            </div>
        </div>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script type="module" src="image-processor.js"></script>
    <script src="sidepanel.js"></script>
</body>
</html>
